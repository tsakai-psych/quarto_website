{
  "hash": "53f88500e7842538b5446dad4d04371f",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"R 69という数字の面白い性質＆文字列の処理と正規表現のメモ\"\ndate: 2026-01-24\nabstract: |\n    69という数字には面白い性質があるらしいので、Rを使って試してみた。あと、数字の文字列の処理と正規表現のメモ。\ncategories: [R memo, enjoy R, preprocess, regex]\nformat: html\nknitr:\n  opts_chunk: \n    fig.align: center\n    dev: ragg_png\n    R.options:\n      width: 100\neditor_options: \n  chunk_output_type: console\n---\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](index_files/figure-html/thmubnail-1.png){fig-align='center' width=75%}\n:::\n:::\n\n\n## packages\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n:::\n\n\n## Contents\n### background\nYoutubeを見てたらたまたまこんな動画に遭遇しました。\n\n<!-- youtube short to normal: /shorts/ > /watch?v= -->\n{{< video https://youtube.com/watch?v=vQSe3bSnwqo?si=wyvUpdlqWHSEQ3uN >}}\n\n69という数字は、2乗した値と3乗した値に0から9までの数字が重複なく現れるそうです。Rを使って確認してみました。\n\n### using tidyverse\n一番最初に思い付いた方法がこれ。\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ntibble(\n  number = 1:100,\n  squared = number^2,\n  cubed = number^3\n) |>\n  filter(\n    str_length(squared) + str_length(cubed) == 10 # <1>\n  ) |>\n  mutate(\n    is_dup = str_c(squared, cubed) |>\n      str_extract_all(pattern = \".\") |>\n      map_lgl( # <2>\n        .f = \\(x) { # <2>\n          duplicated(x) |> # <2>\n            any() # <2>\n        } # <2>\n      )\n  ) |>\n  filter(!is_dup)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 4\n  number squared  cubed is_dup\n   <int>   <dbl>  <dbl> <lgl> \n1     69    4761 328509 FALSE \n```\n\n\n:::\n:::\n\n1. 数字の桁数を取るのにこの書き方だと実は危ないと思います。理由は後述。\n2. 直前の`stringr::str_replace_all(pattern = \".\")`が、各文字を一文字ごとに分解した文字列ベクトルをlist形式にして返してくるので、`purrr::map_*()`を使って処理します。なお、map処理の中身は文字列ベクトルの中に重複が一つでもあるか否か（`duplicated(x) |> any()`）で戻り値はTRUE/FALSEになるので、logicalベクトルを返す`purrr::map_lgl()`を使います。\n\n確かに69だけが残りました。\n\n::: {.callout-note collapse=true}\n\n#### 処理の過程が見たい人向け\n`ViewPipeSteps::print_pipe_steps()`がQuartoのコードアノテーションと相性が悪いので、別にしました。\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"true\"}\ntibble(\n  number = 1:100,\n  squared = number^2,\n  cubed = number^3\n) %>%\n  filter(\n    str_length(squared) + str_length(cubed) == 10\n  ) %>%\n  mutate(\n    is_dup = str_c(squared, cubed) %>%\n      str_extract_all(pattern = \".\") %>%\n      map_lgl(\n        .f = \\(x) {\n          duplicated(x) %>%\n            any()\n        }\n      )\n  ) %>%\n  filter(!is_dup) %>%\n  ViewPipeSteps::print_pipe_steps() -> results # for displaying pipeline processing\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n1. tibble(number = 1:100, squared = number^2, cubed = number^3)\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```{style=\"max-height: 350px;\"}\n# A tibble: 100 × 3\n   number squared cubed\n    <int>   <dbl> <dbl>\n 1      1       1     1\n 2      2       4     8\n 3      3       9    27\n 4      4      16    64\n 5      5      25   125\n 6      6      36   216\n 7      7      49   343\n 8      8      64   512\n 9      9      81   729\n10     10     100  1000\n# ℹ 90 more rows\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n2. filter(str_length(squared) + str_length(cubed) == 10)\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```{style=\"max-height: 350px;\"}\n# A tibble: 54 × 3\n   number squared  cubed\n    <int>   <dbl>  <dbl>\n 1     47    2209 103823\n 2     48    2304 110592\n 3     49    2401 117649\n 4     50    2500 125000\n 5     51    2601 132651\n 6     52    2704 140608\n 7     53    2809 148877\n 8     54    2916 157464\n 9     55    3025 166375\n10     56    3136 175616\n# ℹ 44 more rows\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n3. mutate(is_dup = str_c(squared, cubed) %>% str_extract_all(pattern = \".\") %>% map_lgl(.f = function(x) {\n    duplicated(x) %>% any()\n}))\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```{style=\"max-height: 350px;\"}\n# A tibble: 54 × 4\n   number squared  cubed is_dup\n    <int>   <dbl>  <dbl> <lgl> \n 1     47    2209 103823 TRUE  \n 2     48    2304 110592 TRUE  \n 3     49    2401 117649 TRUE  \n 4     50    2500 125000 TRUE  \n 5     51    2601 132651 TRUE  \n 6     52    2704 140608 TRUE  \n 7     53    2809 148877 TRUE  \n 8     54    2916 157464 TRUE  \n 9     55    3025 166375 TRUE  \n10     56    3136 175616 TRUE  \n# ℹ 44 more rows\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n4. filter(!is_dup)\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```{style=\"max-height: 350px;\"}\n# A tibble: 1 × 4\n  number squared  cubed is_dup\n   <int>   <dbl>  <dbl> <lgl> \n1     69    4761 328509 FALSE \n```\n\n\n:::\n:::\n\n\n`mutate()`の中身の部分。もとの`map_lgl()`の部分はわかりやすく２つに分けてます。\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"true\"}\nstr_c((1:100)^2, (1:100)^3) %>%\n  str_extract_all(pattern = \".\") %>%\n  map(\n    .f = \\(x) {\n      duplicated(x)\n    }\n  ) %>%\n  map_lgl(\n    .f = \\(x) {\n      any(x)\n    }\n  ) %>%\n  ViewPipeSteps::print_pipe_steps() -> results # for displaying pipeline processing\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n1. str_c((1:100)^2, (1:100)^3)\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```{style=\"max-height: 350px;\"}\n  [1] \"11\"         \"48\"         \"927\"        \"1664\"       \"25125\"      \"36216\"      \"49343\"     \n  [8] \"64512\"      \"81729\"      \"1001000\"    \"1211331\"    \"1441728\"    \"1692197\"    \"1962744\"   \n [15] \"2253375\"    \"2564096\"    \"2894913\"    \"3245832\"    \"3616859\"    \"4008000\"    \"4419261\"   \n [22] \"48410648\"   \"52912167\"   \"57613824\"   \"62515625\"   \"67617576\"   \"72919683\"   \"78421952\"  \n [29] \"84124389\"   \"90027000\"   \"96129791\"   \"102432768\"  \"108935937\"  \"115639304\"  \"122542875\" \n [36] \"129646656\"  \"136950653\"  \"144454872\"  \"152159319\"  \"160064000\"  \"168168921\"  \"176474088\" \n [43] \"184979507\"  \"193685184\"  \"202591125\"  \"211697336\"  \"2209103823\" \"2304110592\" \"2401117649\"\n [50] \"2500125000\" \"2601132651\" \"2704140608\" \"2809148877\" \"2916157464\" \"3025166375\" \"3136175616\"\n [57] \"3249185193\" \"3364195112\" \"3481205379\" \"3600216000\" \"3721226981\" \"3844238328\" \"3969250047\"\n [64] \"4096262144\" \"4225274625\" \"4356287496\" \"4489300763\" \"4624314432\" \"4761328509\" \"4900343000\"\n [71] \"5041357911\" \"5184373248\" \"5329389017\" \"5476405224\" \"5625421875\" \"5776438976\" \"5929456533\"\n [78] \"6084474552\" \"6241493039\" \"6400512000\" \"6561531441\" \"6724551368\" \"6889571787\" \"7056592704\"\n [85] \"7225614125\" \"7396636056\" \"7569658503\" \"7744681472\" \"7921704969\" \"8100729000\" \"8281753571\"\n [92] \"8464778688\" \"8649804357\" \"8836830584\" \"9025857375\" \"9216884736\" \"9409912673\" \"9604941192\"\n [99] \"9801970299\" \"100001e+06\"\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n2. str_extract_all(pattern = \".\")\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```{style=\"max-height: 350px;\"}\n[[1]]\n[1] \"1\" \"1\"\n\n[[2]]\n[1] \"4\" \"8\"\n\n[[3]]\n[1] \"9\" \"2\" \"7\"\n\n[[4]]\n[1] \"1\" \"6\" \"6\" \"4\"\n\n[[5]]\n[1] \"2\" \"5\" \"1\" \"2\" \"5\"\n\n[[6]]\n[1] \"3\" \"6\" \"2\" \"1\" \"6\"\n\n[[7]]\n[1] \"4\" \"9\" \"3\" \"4\" \"3\"\n\n[[8]]\n[1] \"6\" \"4\" \"5\" \"1\" \"2\"\n\n[[9]]\n[1] \"8\" \"1\" \"7\" \"2\" \"9\"\n\n[[10]]\n[1] \"1\" \"0\" \"0\" \"1\" \"0\" \"0\" \"0\"\n\n[[11]]\n[1] \"1\" \"2\" \"1\" \"1\" \"3\" \"3\" \"1\"\n\n[[12]]\n[1] \"1\" \"4\" \"4\" \"1\" \"7\" \"2\" \"8\"\n\n[[13]]\n[1] \"1\" \"6\" \"9\" \"2\" \"1\" \"9\" \"7\"\n\n[[14]]\n[1] \"1\" \"9\" \"6\" \"2\" \"7\" \"4\" \"4\"\n\n[[15]]\n[1] \"2\" \"2\" \"5\" \"3\" \"3\" \"7\" \"5\"\n\n[[16]]\n[1] \"2\" \"5\" \"6\" \"4\" \"0\" \"9\" \"6\"\n\n[[17]]\n[1] \"2\" \"8\" \"9\" \"4\" \"9\" \"1\" \"3\"\n\n[[18]]\n[1] \"3\" \"2\" \"4\" \"5\" \"8\" \"3\" \"2\"\n\n[[19]]\n[1] \"3\" \"6\" \"1\" \"6\" \"8\" \"5\" \"9\"\n\n[[20]]\n[1] \"4\" \"0\" \"0\" \"8\" \"0\" \"0\" \"0\"\n\n[[21]]\n[1] \"4\" \"4\" \"1\" \"9\" \"2\" \"6\" \"1\"\n\n[[22]]\n[1] \"4\" \"8\" \"4\" \"1\" \"0\" \"6\" \"4\" \"8\"\n\n[[23]]\n[1] \"5\" \"2\" \"9\" \"1\" \"2\" \"1\" \"6\" \"7\"\n\n[[24]]\n[1] \"5\" \"7\" \"6\" \"1\" \"3\" \"8\" \"2\" \"4\"\n\n[[25]]\n[1] \"6\" \"2\" \"5\" \"1\" \"5\" \"6\" \"2\" \"5\"\n\n[[26]]\n[1] \"6\" \"7\" \"6\" \"1\" \"7\" \"5\" \"7\" \"6\"\n\n[[27]]\n[1] \"7\" \"2\" \"9\" \"1\" \"9\" \"6\" \"8\" \"3\"\n\n[[28]]\n[1] \"7\" \"8\" \"4\" \"2\" \"1\" \"9\" \"5\" \"2\"\n\n[[29]]\n[1] \"8\" \"4\" \"1\" \"2\" \"4\" \"3\" \"8\" \"9\"\n\n[[30]]\n[1] \"9\" \"0\" \"0\" \"2\" \"7\" \"0\" \"0\" \"0\"\n\n[[31]]\n[1] \"9\" \"6\" \"1\" \"2\" \"9\" \"7\" \"9\" \"1\"\n\n[[32]]\n[1] \"1\" \"0\" \"2\" \"4\" \"3\" \"2\" \"7\" \"6\" \"8\"\n\n[[33]]\n[1] \"1\" \"0\" \"8\" \"9\" \"3\" \"5\" \"9\" \"3\" \"7\"\n\n[[34]]\n[1] \"1\" \"1\" \"5\" \"6\" \"3\" \"9\" \"3\" \"0\" \"4\"\n\n[[35]]\n[1] \"1\" \"2\" \"2\" \"5\" \"4\" \"2\" \"8\" \"7\" \"5\"\n\n[[36]]\n[1] \"1\" \"2\" \"9\" \"6\" \"4\" \"6\" \"6\" \"5\" \"6\"\n\n[[37]]\n[1] \"1\" \"3\" \"6\" \"9\" \"5\" \"0\" \"6\" \"5\" \"3\"\n\n[[38]]\n[1] \"1\" \"4\" \"4\" \"4\" \"5\" \"4\" \"8\" \"7\" \"2\"\n\n[[39]]\n[1] \"1\" \"5\" \"2\" \"1\" \"5\" \"9\" \"3\" \"1\" \"9\"\n\n[[40]]\n[1] \"1\" \"6\" \"0\" \"0\" \"6\" \"4\" \"0\" \"0\" \"0\"\n\n[[41]]\n[1] \"1\" \"6\" \"8\" \"1\" \"6\" \"8\" \"9\" \"2\" \"1\"\n\n[[42]]\n[1] \"1\" \"7\" \"6\" \"4\" \"7\" \"4\" \"0\" \"8\" \"8\"\n\n[[43]]\n[1] \"1\" \"8\" \"4\" \"9\" \"7\" \"9\" \"5\" \"0\" \"7\"\n\n[[44]]\n[1] \"1\" \"9\" \"3\" \"6\" \"8\" \"5\" \"1\" \"8\" \"4\"\n\n[[45]]\n[1] \"2\" \"0\" \"2\" \"5\" \"9\" \"1\" \"1\" \"2\" \"5\"\n\n[[46]]\n[1] \"2\" \"1\" \"1\" \"6\" \"9\" \"7\" \"3\" \"3\" \"6\"\n\n[[47]]\n [1] \"2\" \"2\" \"0\" \"9\" \"1\" \"0\" \"3\" \"8\" \"2\" \"3\"\n\n[[48]]\n [1] \"2\" \"3\" \"0\" \"4\" \"1\" \"1\" \"0\" \"5\" \"9\" \"2\"\n\n[[49]]\n [1] \"2\" \"4\" \"0\" \"1\" \"1\" \"1\" \"7\" \"6\" \"4\" \"9\"\n\n[[50]]\n [1] \"2\" \"5\" \"0\" \"0\" \"1\" \"2\" \"5\" \"0\" \"0\" \"0\"\n\n[[51]]\n [1] \"2\" \"6\" \"0\" \"1\" \"1\" \"3\" \"2\" \"6\" \"5\" \"1\"\n\n[[52]]\n [1] \"2\" \"7\" \"0\" \"4\" \"1\" \"4\" \"0\" \"6\" \"0\" \"8\"\n\n[[53]]\n [1] \"2\" \"8\" \"0\" \"9\" \"1\" \"4\" \"8\" \"8\" \"7\" \"7\"\n\n[[54]]\n [1] \"2\" \"9\" \"1\" \"6\" \"1\" \"5\" \"7\" \"4\" \"6\" \"4\"\n\n[[55]]\n [1] \"3\" \"0\" \"2\" \"5\" \"1\" \"6\" \"6\" \"3\" \"7\" \"5\"\n\n[[56]]\n [1] \"3\" \"1\" \"3\" \"6\" \"1\" \"7\" \"5\" \"6\" \"1\" \"6\"\n\n[[57]]\n [1] \"3\" \"2\" \"4\" \"9\" \"1\" \"8\" \"5\" \"1\" \"9\" \"3\"\n\n[[58]]\n [1] \"3\" \"3\" \"6\" \"4\" \"1\" \"9\" \"5\" \"1\" \"1\" \"2\"\n\n[[59]]\n [1] \"3\" \"4\" \"8\" \"1\" \"2\" \"0\" \"5\" \"3\" \"7\" \"9\"\n\n[[60]]\n [1] \"3\" \"6\" \"0\" \"0\" \"2\" \"1\" \"6\" \"0\" \"0\" \"0\"\n\n[[61]]\n [1] \"3\" \"7\" \"2\" \"1\" \"2\" \"2\" \"6\" \"9\" \"8\" \"1\"\n\n[[62]]\n [1] \"3\" \"8\" \"4\" \"4\" \"2\" \"3\" \"8\" \"3\" \"2\" \"8\"\n\n[[63]]\n [1] \"3\" \"9\" \"6\" \"9\" \"2\" \"5\" \"0\" \"0\" \"4\" \"7\"\n\n[[64]]\n [1] \"4\" \"0\" \"9\" \"6\" \"2\" \"6\" \"2\" \"1\" \"4\" \"4\"\n\n[[65]]\n [1] \"4\" \"2\" \"2\" \"5\" \"2\" \"7\" \"4\" \"6\" \"2\" \"5\"\n\n[[66]]\n [1] \"4\" \"3\" \"5\" \"6\" \"2\" \"8\" \"7\" \"4\" \"9\" \"6\"\n\n[[67]]\n [1] \"4\" \"4\" \"8\" \"9\" \"3\" \"0\" \"0\" \"7\" \"6\" \"3\"\n\n[[68]]\n [1] \"4\" \"6\" \"2\" \"4\" \"3\" \"1\" \"4\" \"4\" \"3\" \"2\"\n\n[[69]]\n [1] \"4\" \"7\" \"6\" \"1\" \"3\" \"2\" \"8\" \"5\" \"0\" \"9\"\n\n[[70]]\n [1] \"4\" \"9\" \"0\" \"0\" \"3\" \"4\" \"3\" \"0\" \"0\" \"0\"\n\n[[71]]\n [1] \"5\" \"0\" \"4\" \"1\" \"3\" \"5\" \"7\" \"9\" \"1\" \"1\"\n\n[[72]]\n [1] \"5\" \"1\" \"8\" \"4\" \"3\" \"7\" \"3\" \"2\" \"4\" \"8\"\n\n[[73]]\n [1] \"5\" \"3\" \"2\" \"9\" \"3\" \"8\" \"9\" \"0\" \"1\" \"7\"\n\n[[74]]\n [1] \"5\" \"4\" \"7\" \"6\" \"4\" \"0\" \"5\" \"2\" \"2\" \"4\"\n\n[[75]]\n [1] \"5\" \"6\" \"2\" \"5\" \"4\" \"2\" \"1\" \"8\" \"7\" \"5\"\n\n[[76]]\n [1] \"5\" \"7\" \"7\" \"6\" \"4\" \"3\" \"8\" \"9\" \"7\" \"6\"\n\n[[77]]\n [1] \"5\" \"9\" \"2\" \"9\" \"4\" \"5\" \"6\" \"5\" \"3\" \"3\"\n\n[[78]]\n [1] \"6\" \"0\" \"8\" \"4\" \"4\" \"7\" \"4\" \"5\" \"5\" \"2\"\n\n[[79]]\n [1] \"6\" \"2\" \"4\" \"1\" \"4\" \"9\" \"3\" \"0\" \"3\" \"9\"\n\n[[80]]\n [1] \"6\" \"4\" \"0\" \"0\" \"5\" \"1\" \"2\" \"0\" \"0\" \"0\"\n\n[[81]]\n [1] \"6\" \"5\" \"6\" \"1\" \"5\" \"3\" \"1\" \"4\" \"4\" \"1\"\n\n[[82]]\n [1] \"6\" \"7\" \"2\" \"4\" \"5\" \"5\" \"1\" \"3\" \"6\" \"8\"\n\n[[83]]\n [1] \"6\" \"8\" \"8\" \"9\" \"5\" \"7\" \"1\" \"7\" \"8\" \"7\"\n\n[[84]]\n [1] \"7\" \"0\" \"5\" \"6\" \"5\" \"9\" \"2\" \"7\" \"0\" \"4\"\n\n[[85]]\n [1] \"7\" \"2\" \"2\" \"5\" \"6\" \"1\" \"4\" \"1\" \"2\" \"5\"\n\n[[86]]\n [1] \"7\" \"3\" \"9\" \"6\" \"6\" \"3\" \"6\" \"0\" \"5\" \"6\"\n\n[[87]]\n [1] \"7\" \"5\" \"6\" \"9\" \"6\" \"5\" \"8\" \"5\" \"0\" \"3\"\n\n[[88]]\n [1] \"7\" \"7\" \"4\" \"4\" \"6\" \"8\" \"1\" \"4\" \"7\" \"2\"\n\n[[89]]\n [1] \"7\" \"9\" \"2\" \"1\" \"7\" \"0\" \"4\" \"9\" \"6\" \"9\"\n\n[[90]]\n [1] \"8\" \"1\" \"0\" \"0\" \"7\" \"2\" \"9\" \"0\" \"0\" \"0\"\n\n[[91]]\n [1] \"8\" \"2\" \"8\" \"1\" \"7\" \"5\" \"3\" \"5\" \"7\" \"1\"\n\n[[92]]\n [1] \"8\" \"4\" \"6\" \"4\" \"7\" \"7\" \"8\" \"6\" \"8\" \"8\"\n\n[[93]]\n [1] \"8\" \"6\" \"4\" \"9\" \"8\" \"0\" \"4\" \"3\" \"5\" \"7\"\n\n[[94]]\n [1] \"8\" \"8\" \"3\" \"6\" \"8\" \"3\" \"0\" \"5\" \"8\" \"4\"\n\n[[95]]\n [1] \"9\" \"0\" \"2\" \"5\" \"8\" \"5\" \"7\" \"3\" \"7\" \"5\"\n\n[[96]]\n [1] \"9\" \"2\" \"1\" \"6\" \"8\" \"8\" \"4\" \"7\" \"3\" \"6\"\n\n[[97]]\n [1] \"9\" \"4\" \"0\" \"9\" \"9\" \"1\" \"2\" \"6\" \"7\" \"3\"\n\n[[98]]\n [1] \"9\" \"6\" \"0\" \"4\" \"9\" \"4\" \"1\" \"1\" \"9\" \"2\"\n\n[[99]]\n [1] \"9\" \"8\" \"0\" \"1\" \"9\" \"7\" \"0\" \"2\" \"9\" \"9\"\n\n[[100]]\n [1] \"1\" \"0\" \"0\" \"0\" \"0\" \"1\" \"e\" \"+\" \"0\" \"6\"\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n3. map(.f = function(x) {\n    duplicated(x)\n})\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```{style=\"max-height: 350px;\"}\n[[1]]\n[1] FALSE  TRUE\n\n[[2]]\n[1] FALSE FALSE\n\n[[3]]\n[1] FALSE FALSE FALSE\n\n[[4]]\n[1] FALSE FALSE  TRUE FALSE\n\n[[5]]\n[1] FALSE FALSE FALSE  TRUE  TRUE\n\n[[6]]\n[1] FALSE FALSE FALSE FALSE  TRUE\n\n[[7]]\n[1] FALSE FALSE FALSE  TRUE  TRUE\n\n[[8]]\n[1] FALSE FALSE FALSE FALSE FALSE\n\n[[9]]\n[1] FALSE FALSE FALSE FALSE FALSE\n\n[[10]]\n[1] FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE\n\n[[11]]\n[1] FALSE FALSE  TRUE  TRUE FALSE  TRUE  TRUE\n\n[[12]]\n[1] FALSE FALSE  TRUE  TRUE FALSE FALSE FALSE\n\n[[13]]\n[1] FALSE FALSE FALSE FALSE  TRUE  TRUE FALSE\n\n[[14]]\n[1] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE\n\n[[15]]\n[1] FALSE  TRUE FALSE FALSE  TRUE FALSE  TRUE\n\n[[16]]\n[1] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE\n\n[[17]]\n[1] FALSE FALSE FALSE FALSE  TRUE FALSE FALSE\n\n[[18]]\n[1] FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE\n\n[[19]]\n[1] FALSE FALSE FALSE  TRUE FALSE FALSE FALSE\n\n[[20]]\n[1] FALSE FALSE  TRUE FALSE  TRUE  TRUE  TRUE\n\n[[21]]\n[1] FALSE  TRUE FALSE FALSE FALSE FALSE  TRUE\n\n[[22]]\n[1] FALSE FALSE  TRUE FALSE FALSE FALSE  TRUE  TRUE\n\n[[23]]\n[1] FALSE FALSE FALSE FALSE  TRUE  TRUE FALSE FALSE\n\n[[24]]\n[1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n\n[[25]]\n[1] FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE\n\n[[26]]\n[1] FALSE FALSE  TRUE FALSE  TRUE FALSE  TRUE  TRUE\n\n[[27]]\n[1] FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE\n\n[[28]]\n[1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE\n\n[[29]]\n[1] FALSE FALSE FALSE FALSE  TRUE FALSE  TRUE FALSE\n\n[[30]]\n[1] FALSE FALSE  TRUE FALSE FALSE  TRUE  TRUE  TRUE\n\n[[31]]\n[1] FALSE FALSE FALSE FALSE  TRUE FALSE  TRUE  TRUE\n\n[[32]]\n[1] FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE\n\n[[33]]\n[1] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE FALSE\n\n[[34]]\n[1] FALSE  TRUE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE\n\n[[35]]\n[1] FALSE FALSE  TRUE FALSE FALSE  TRUE FALSE FALSE  TRUE\n\n[[36]]\n[1] FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE FALSE  TRUE\n\n[[37]]\n[1] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE\n\n[[38]]\n[1] FALSE FALSE  TRUE  TRUE FALSE  TRUE FALSE FALSE FALSE\n\n[[39]]\n[1] FALSE FALSE FALSE  TRUE  TRUE FALSE FALSE  TRUE  TRUE\n\n[[40]]\n[1] FALSE FALSE FALSE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE\n\n[[41]]\n[1] FALSE FALSE FALSE  TRUE  TRUE  TRUE FALSE FALSE  TRUE\n\n[[42]]\n[1] FALSE FALSE FALSE FALSE  TRUE  TRUE FALSE FALSE  TRUE\n\n[[43]]\n[1] FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE  TRUE\n\n[[44]]\n[1] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE FALSE\n\n[[45]]\n[1] FALSE FALSE  TRUE FALSE FALSE FALSE  TRUE  TRUE  TRUE\n\n[[46]]\n[1] FALSE FALSE  TRUE FALSE FALSE FALSE FALSE  TRUE  TRUE\n\n[[47]]\n [1] FALSE  TRUE FALSE FALSE FALSE  TRUE FALSE FALSE  TRUE  TRUE\n\n[[48]]\n [1] FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE FALSE FALSE  TRUE\n\n[[49]]\n [1] FALSE FALSE FALSE FALSE  TRUE  TRUE FALSE FALSE  TRUE FALSE\n\n[[50]]\n [1] FALSE FALSE FALSE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE\n\n[[51]]\n [1] FALSE FALSE FALSE FALSE  TRUE FALSE  TRUE  TRUE FALSE  TRUE\n\n[[52]]\n [1] FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE FALSE  TRUE FALSE\n\n[[53]]\n [1] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE FALSE  TRUE\n\n[[54]]\n [1] FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE  TRUE  TRUE\n\n[[55]]\n [1] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE FALSE  TRUE\n\n[[56]]\n [1] FALSE FALSE  TRUE FALSE  TRUE FALSE FALSE  TRUE  TRUE  TRUE\n\n[[57]]\n [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE\n\n[[58]]\n [1] FALSE  TRUE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE FALSE\n\n[[59]]\n [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE\n\n[[60]]\n [1] FALSE FALSE FALSE  TRUE FALSE FALSE  TRUE  TRUE  TRUE  TRUE\n\n[[61]]\n [1] FALSE FALSE FALSE FALSE  TRUE  TRUE FALSE FALSE FALSE  TRUE\n\n[[62]]\n [1] FALSE FALSE FALSE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE\n\n[[63]]\n [1] FALSE FALSE FALSE  TRUE FALSE FALSE FALSE  TRUE FALSE FALSE\n\n[[64]]\n [1] FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE FALSE  TRUE  TRUE\n\n[[65]]\n [1] FALSE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE  TRUE\n\n[[66]]\n [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE  TRUE\n\n[[67]]\n [1] FALSE  TRUE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE  TRUE\n\n[[68]]\n [1] FALSE FALSE FALSE  TRUE FALSE FALSE  TRUE  TRUE  TRUE  TRUE\n\n[[69]]\n [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n\n[[70]]\n [1] FALSE FALSE FALSE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE\n\n[[71]]\n [1] FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE  TRUE  TRUE\n\n[[72]]\n [1] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE  TRUE  TRUE\n\n[[73]]\n [1] FALSE FALSE FALSE FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE\n\n[[74]]\n [1] FALSE FALSE FALSE FALSE  TRUE FALSE  TRUE FALSE  TRUE  TRUE\n\n[[75]]\n [1] FALSE FALSE FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE  TRUE\n\n[[76]]\n [1] FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE\n\n[[77]]\n [1] FALSE FALSE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE\n\n[[78]]\n [1] FALSE FALSE FALSE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE\n\n[[79]]\n [1] FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE  TRUE  TRUE\n\n[[80]]\n [1] FALSE FALSE FALSE  TRUE FALSE FALSE FALSE  TRUE  TRUE  TRUE\n\n[[81]]\n [1] FALSE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE  TRUE\n\n[[82]]\n [1] FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE  TRUE FALSE\n\n[[83]]\n [1] FALSE FALSE  TRUE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE\n\n[[84]]\n [1] FALSE FALSE FALSE FALSE  TRUE FALSE FALSE  TRUE  TRUE FALSE\n\n[[85]]\n [1] FALSE FALSE  TRUE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE\n\n[[86]]\n [1] FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE FALSE FALSE  TRUE\n\n[[87]]\n [1] FALSE FALSE FALSE FALSE  TRUE  TRUE FALSE  TRUE FALSE FALSE\n\n[[88]]\n [1] FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE  TRUE  TRUE FALSE\n\n[[89]]\n [1] FALSE FALSE FALSE FALSE  TRUE FALSE FALSE  TRUE FALSE  TRUE\n\n[[90]]\n [1] FALSE FALSE FALSE  TRUE FALSE FALSE FALSE  TRUE  TRUE  TRUE\n\n[[91]]\n [1] FALSE FALSE  TRUE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE\n\n[[92]]\n [1] FALSE FALSE FALSE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE\n\n[[93]]\n [1] FALSE FALSE FALSE FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE\n\n[[94]]\n [1] FALSE  TRUE FALSE FALSE  TRUE  TRUE FALSE FALSE  TRUE FALSE\n\n[[95]]\n [1] FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE  TRUE  TRUE\n\n[[96]]\n [1] FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE  TRUE\n\n[[97]]\n [1] FALSE FALSE FALSE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE\n\n[[98]]\n [1] FALSE FALSE FALSE FALSE  TRUE  TRUE FALSE  TRUE  TRUE FALSE\n\n[[99]]\n [1] FALSE FALSE FALSE FALSE  TRUE FALSE  TRUE FALSE  TRUE  TRUE\n\n[[100]]\n [1] FALSE FALSE  TRUE  TRUE  TRUE  TRUE FALSE FALSE  TRUE FALSE\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n4. map_lgl(.f = function(x) {\n    any(x)\n})\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```{style=\"max-height: 350px;\"}\n  [1]  TRUE FALSE FALSE  TRUE  TRUE  TRUE  TRUE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [16]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [31]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [46]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [61]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [76]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n [91]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n```\n\n\n:::\n:::\n\n\n:::\n\nよくよく考えてみたら、わざわざtibbleにしなくてもできることに気づいたので、ベクトルとして処理してみます。とりあえず、まず最初に1から100までの2乗と3乗をくっつけたベクトルを作っておきます。\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nvec_num_sqcu <-\n  paste0(\n    (1:100)^2, (1:100)^3\n  ) |>\n  setNames(1:100)\n\nvec_num_sqcu\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n           1            2            3            4            5            6            7 \n        \"11\"         \"48\"        \"927\"       \"1664\"      \"25125\"      \"36216\"      \"49343\" \n           8            9           10           11           12           13           14 \n     \"64512\"      \"81729\"    \"1001000\"    \"1211331\"    \"1441728\"    \"1692197\"    \"1962744\" \n          15           16           17           18           19           20           21 \n   \"2253375\"    \"2564096\"    \"2894913\"    \"3245832\"    \"3616859\"    \"4008000\"    \"4419261\" \n          22           23           24           25           26           27           28 \n  \"48410648\"   \"52912167\"   \"57613824\"   \"62515625\"   \"67617576\"   \"72919683\"   \"78421952\" \n          29           30           31           32           33           34           35 \n  \"84124389\"   \"90027000\"   \"96129791\"  \"102432768\"  \"108935937\"  \"115639304\"  \"122542875\" \n          36           37           38           39           40           41           42 \n \"129646656\"  \"136950653\"  \"144454872\"  \"152159319\"  \"160064000\"  \"168168921\"  \"176474088\" \n          43           44           45           46           47           48           49 \n \"184979507\"  \"193685184\"  \"202591125\"  \"211697336\" \"2209103823\" \"2304110592\" \"2401117649\" \n          50           51           52           53           54           55           56 \n\"2500125000\" \"2601132651\" \"2704140608\" \"2809148877\" \"2916157464\" \"3025166375\" \"3136175616\" \n          57           58           59           60           61           62           63 \n\"3249185193\" \"3364195112\" \"3481205379\" \"3600216000\" \"3721226981\" \"3844238328\" \"3969250047\" \n          64           65           66           67           68           69           70 \n\"4096262144\" \"4225274625\" \"4356287496\" \"4489300763\" \"4624314432\" \"4761328509\" \"4900343000\" \n          71           72           73           74           75           76           77 \n\"5041357911\" \"5184373248\" \"5329389017\" \"5476405224\" \"5625421875\" \"5776438976\" \"5929456533\" \n          78           79           80           81           82           83           84 \n\"6084474552\" \"6241493039\" \"6400512000\" \"6561531441\" \"6724551368\" \"6889571787\" \"7056592704\" \n          85           86           87           88           89           90           91 \n\"7225614125\" \"7396636056\" \"7569658503\" \"7744681472\" \"7921704969\" \"8100729000\" \"8281753571\" \n          92           93           94           95           96           97           98 \n\"8464778688\" \"8649804357\" \"8836830584\" \"9025857375\" \"9216884736\" \"9409912673\" \"9604941192\" \n          99          100 \n\"9801970299\" \"100001e+06\" \n```\n\n\n:::\n:::\n\n\n`stringr`パッケージの関数で処理します。アップデートしてなくてバージョンが1.5.1のままなのでnamed  vectorが返ってこないです。100個のベクトルのまま処理して最後に`str_which()`でインデックスを返すことにします。（stringr 1.6.0からはnamed vectorが返ってきます[^stringr]。updateすればいいじゃんという指摘は今回聞かなかったこととします。）\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nvec_num_sqcu |>\n  str_split(pattern = \"\") |> # <1>\n  map_chr(\n    .f = \\(x) {\n      str_sort(x, numeric = TRUE) |> # <2>\n        str_flatten() # <3>\n    }\n  ) |>\n  str_which(pattern = \"0123456789\") # <4>\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 69\n```\n\n\n:::\n:::\n\n1. `stringr::str_split()`の引数`pattern`に`\"\"`を入れると、一文字ずつ文字を分けてくれます。\n2. `numeric = TRUE`にすると、数字は数値としてソートしてくれます。今回は別になくてもいいです。\n3. `stringr::str_flatten()`は文字列ベクトルを単一の文字列にしてくれます。デフォルトで`collapse = \"\"`なので、コード補完を効かせていれば`str_c(collapse = \"\")`よりも入力が少ないです。\n4. `stringr::str_which()`は引数`pattern`に当てはまる要素のインデックスを返してくれます。\n\n[^stringr]: <https://tidyverse.org/blog/2025/11/stringr-1-6-0/>\n\n::: {.callout-note collapse=true}\n\n#### 処理の過程が見たい人向け\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"true\"}\nvec_num_sqcu %>%\n  str_split(pattern = \"\") %>%\n  map_chr(\n    .f = \\(x) {\n      str_sort(x, numeric = TRUE) %>%\n        str_flatten()\n    }\n  ) %>%\n  str_which(pattern = \"0123456789\") %>%\n  ViewPipeSteps::print_pipe_steps() -> results # for displaying pipeline processing\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n1. vec_num_sqcu\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```{style=\"max-height: 350px;\"}\n           1            2            3            4            5            6            7 \n        \"11\"         \"48\"        \"927\"       \"1664\"      \"25125\"      \"36216\"      \"49343\" \n           8            9           10           11           12           13           14 \n     \"64512\"      \"81729\"    \"1001000\"    \"1211331\"    \"1441728\"    \"1692197\"    \"1962744\" \n          15           16           17           18           19           20           21 \n   \"2253375\"    \"2564096\"    \"2894913\"    \"3245832\"    \"3616859\"    \"4008000\"    \"4419261\" \n          22           23           24           25           26           27           28 \n  \"48410648\"   \"52912167\"   \"57613824\"   \"62515625\"   \"67617576\"   \"72919683\"   \"78421952\" \n          29           30           31           32           33           34           35 \n  \"84124389\"   \"90027000\"   \"96129791\"  \"102432768\"  \"108935937\"  \"115639304\"  \"122542875\" \n          36           37           38           39           40           41           42 \n \"129646656\"  \"136950653\"  \"144454872\"  \"152159319\"  \"160064000\"  \"168168921\"  \"176474088\" \n          43           44           45           46           47           48           49 \n \"184979507\"  \"193685184\"  \"202591125\"  \"211697336\" \"2209103823\" \"2304110592\" \"2401117649\" \n          50           51           52           53           54           55           56 \n\"2500125000\" \"2601132651\" \"2704140608\" \"2809148877\" \"2916157464\" \"3025166375\" \"3136175616\" \n          57           58           59           60           61           62           63 \n\"3249185193\" \"3364195112\" \"3481205379\" \"3600216000\" \"3721226981\" \"3844238328\" \"3969250047\" \n          64           65           66           67           68           69           70 \n\"4096262144\" \"4225274625\" \"4356287496\" \"4489300763\" \"4624314432\" \"4761328509\" \"4900343000\" \n          71           72           73           74           75           76           77 \n\"5041357911\" \"5184373248\" \"5329389017\" \"5476405224\" \"5625421875\" \"5776438976\" \"5929456533\" \n          78           79           80           81           82           83           84 \n\"6084474552\" \"6241493039\" \"6400512000\" \"6561531441\" \"6724551368\" \"6889571787\" \"7056592704\" \n          85           86           87           88           89           90           91 \n\"7225614125\" \"7396636056\" \"7569658503\" \"7744681472\" \"7921704969\" \"8100729000\" \"8281753571\" \n          92           93           94           95           96           97           98 \n\"8464778688\" \"8649804357\" \"8836830584\" \"9025857375\" \"9216884736\" \"9409912673\" \"9604941192\" \n          99          100 \n\"9801970299\" \"100001e+06\" \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n2. str_split(pattern = \"\")\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```{style=\"max-height: 350px;\"}\n[[1]]\n[1] \"1\" \"1\"\n\n[[2]]\n[1] \"4\" \"8\"\n\n[[3]]\n[1] \"9\" \"2\" \"7\"\n\n[[4]]\n[1] \"1\" \"6\" \"6\" \"4\"\n\n[[5]]\n[1] \"2\" \"5\" \"1\" \"2\" \"5\"\n\n[[6]]\n[1] \"3\" \"6\" \"2\" \"1\" \"6\"\n\n[[7]]\n[1] \"4\" \"9\" \"3\" \"4\" \"3\"\n\n[[8]]\n[1] \"6\" \"4\" \"5\" \"1\" \"2\"\n\n[[9]]\n[1] \"8\" \"1\" \"7\" \"2\" \"9\"\n\n[[10]]\n[1] \"1\" \"0\" \"0\" \"1\" \"0\" \"0\" \"0\"\n\n[[11]]\n[1] \"1\" \"2\" \"1\" \"1\" \"3\" \"3\" \"1\"\n\n[[12]]\n[1] \"1\" \"4\" \"4\" \"1\" \"7\" \"2\" \"8\"\n\n[[13]]\n[1] \"1\" \"6\" \"9\" \"2\" \"1\" \"9\" \"7\"\n\n[[14]]\n[1] \"1\" \"9\" \"6\" \"2\" \"7\" \"4\" \"4\"\n\n[[15]]\n[1] \"2\" \"2\" \"5\" \"3\" \"3\" \"7\" \"5\"\n\n[[16]]\n[1] \"2\" \"5\" \"6\" \"4\" \"0\" \"9\" \"6\"\n\n[[17]]\n[1] \"2\" \"8\" \"9\" \"4\" \"9\" \"1\" \"3\"\n\n[[18]]\n[1] \"3\" \"2\" \"4\" \"5\" \"8\" \"3\" \"2\"\n\n[[19]]\n[1] \"3\" \"6\" \"1\" \"6\" \"8\" \"5\" \"9\"\n\n[[20]]\n[1] \"4\" \"0\" \"0\" \"8\" \"0\" \"0\" \"0\"\n\n[[21]]\n[1] \"4\" \"4\" \"1\" \"9\" \"2\" \"6\" \"1\"\n\n[[22]]\n[1] \"4\" \"8\" \"4\" \"1\" \"0\" \"6\" \"4\" \"8\"\n\n[[23]]\n[1] \"5\" \"2\" \"9\" \"1\" \"2\" \"1\" \"6\" \"7\"\n\n[[24]]\n[1] \"5\" \"7\" \"6\" \"1\" \"3\" \"8\" \"2\" \"4\"\n\n[[25]]\n[1] \"6\" \"2\" \"5\" \"1\" \"5\" \"6\" \"2\" \"5\"\n\n[[26]]\n[1] \"6\" \"7\" \"6\" \"1\" \"7\" \"5\" \"7\" \"6\"\n\n[[27]]\n[1] \"7\" \"2\" \"9\" \"1\" \"9\" \"6\" \"8\" \"3\"\n\n[[28]]\n[1] \"7\" \"8\" \"4\" \"2\" \"1\" \"9\" \"5\" \"2\"\n\n[[29]]\n[1] \"8\" \"4\" \"1\" \"2\" \"4\" \"3\" \"8\" \"9\"\n\n[[30]]\n[1] \"9\" \"0\" \"0\" \"2\" \"7\" \"0\" \"0\" \"0\"\n\n[[31]]\n[1] \"9\" \"6\" \"1\" \"2\" \"9\" \"7\" \"9\" \"1\"\n\n[[32]]\n[1] \"1\" \"0\" \"2\" \"4\" \"3\" \"2\" \"7\" \"6\" \"8\"\n\n[[33]]\n[1] \"1\" \"0\" \"8\" \"9\" \"3\" \"5\" \"9\" \"3\" \"7\"\n\n[[34]]\n[1] \"1\" \"1\" \"5\" \"6\" \"3\" \"9\" \"3\" \"0\" \"4\"\n\n[[35]]\n[1] \"1\" \"2\" \"2\" \"5\" \"4\" \"2\" \"8\" \"7\" \"5\"\n\n[[36]]\n[1] \"1\" \"2\" \"9\" \"6\" \"4\" \"6\" \"6\" \"5\" \"6\"\n\n[[37]]\n[1] \"1\" \"3\" \"6\" \"9\" \"5\" \"0\" \"6\" \"5\" \"3\"\n\n[[38]]\n[1] \"1\" \"4\" \"4\" \"4\" \"5\" \"4\" \"8\" \"7\" \"2\"\n\n[[39]]\n[1] \"1\" \"5\" \"2\" \"1\" \"5\" \"9\" \"3\" \"1\" \"9\"\n\n[[40]]\n[1] \"1\" \"6\" \"0\" \"0\" \"6\" \"4\" \"0\" \"0\" \"0\"\n\n[[41]]\n[1] \"1\" \"6\" \"8\" \"1\" \"6\" \"8\" \"9\" \"2\" \"1\"\n\n[[42]]\n[1] \"1\" \"7\" \"6\" \"4\" \"7\" \"4\" \"0\" \"8\" \"8\"\n\n[[43]]\n[1] \"1\" \"8\" \"4\" \"9\" \"7\" \"9\" \"5\" \"0\" \"7\"\n\n[[44]]\n[1] \"1\" \"9\" \"3\" \"6\" \"8\" \"5\" \"1\" \"8\" \"4\"\n\n[[45]]\n[1] \"2\" \"0\" \"2\" \"5\" \"9\" \"1\" \"1\" \"2\" \"5\"\n\n[[46]]\n[1] \"2\" \"1\" \"1\" \"6\" \"9\" \"7\" \"3\" \"3\" \"6\"\n\n[[47]]\n [1] \"2\" \"2\" \"0\" \"9\" \"1\" \"0\" \"3\" \"8\" \"2\" \"3\"\n\n[[48]]\n [1] \"2\" \"3\" \"0\" \"4\" \"1\" \"1\" \"0\" \"5\" \"9\" \"2\"\n\n[[49]]\n [1] \"2\" \"4\" \"0\" \"1\" \"1\" \"1\" \"7\" \"6\" \"4\" \"9\"\n\n[[50]]\n [1] \"2\" \"5\" \"0\" \"0\" \"1\" \"2\" \"5\" \"0\" \"0\" \"0\"\n\n[[51]]\n [1] \"2\" \"6\" \"0\" \"1\" \"1\" \"3\" \"2\" \"6\" \"5\" \"1\"\n\n[[52]]\n [1] \"2\" \"7\" \"0\" \"4\" \"1\" \"4\" \"0\" \"6\" \"0\" \"8\"\n\n[[53]]\n [1] \"2\" \"8\" \"0\" \"9\" \"1\" \"4\" \"8\" \"8\" \"7\" \"7\"\n\n[[54]]\n [1] \"2\" \"9\" \"1\" \"6\" \"1\" \"5\" \"7\" \"4\" \"6\" \"4\"\n\n[[55]]\n [1] \"3\" \"0\" \"2\" \"5\" \"1\" \"6\" \"6\" \"3\" \"7\" \"5\"\n\n[[56]]\n [1] \"3\" \"1\" \"3\" \"6\" \"1\" \"7\" \"5\" \"6\" \"1\" \"6\"\n\n[[57]]\n [1] \"3\" \"2\" \"4\" \"9\" \"1\" \"8\" \"5\" \"1\" \"9\" \"3\"\n\n[[58]]\n [1] \"3\" \"3\" \"6\" \"4\" \"1\" \"9\" \"5\" \"1\" \"1\" \"2\"\n\n[[59]]\n [1] \"3\" \"4\" \"8\" \"1\" \"2\" \"0\" \"5\" \"3\" \"7\" \"9\"\n\n[[60]]\n [1] \"3\" \"6\" \"0\" \"0\" \"2\" \"1\" \"6\" \"0\" \"0\" \"0\"\n\n[[61]]\n [1] \"3\" \"7\" \"2\" \"1\" \"2\" \"2\" \"6\" \"9\" \"8\" \"1\"\n\n[[62]]\n [1] \"3\" \"8\" \"4\" \"4\" \"2\" \"3\" \"8\" \"3\" \"2\" \"8\"\n\n[[63]]\n [1] \"3\" \"9\" \"6\" \"9\" \"2\" \"5\" \"0\" \"0\" \"4\" \"7\"\n\n[[64]]\n [1] \"4\" \"0\" \"9\" \"6\" \"2\" \"6\" \"2\" \"1\" \"4\" \"4\"\n\n[[65]]\n [1] \"4\" \"2\" \"2\" \"5\" \"2\" \"7\" \"4\" \"6\" \"2\" \"5\"\n\n[[66]]\n [1] \"4\" \"3\" \"5\" \"6\" \"2\" \"8\" \"7\" \"4\" \"9\" \"6\"\n\n[[67]]\n [1] \"4\" \"4\" \"8\" \"9\" \"3\" \"0\" \"0\" \"7\" \"6\" \"3\"\n\n[[68]]\n [1] \"4\" \"6\" \"2\" \"4\" \"3\" \"1\" \"4\" \"4\" \"3\" \"2\"\n\n[[69]]\n [1] \"4\" \"7\" \"6\" \"1\" \"3\" \"2\" \"8\" \"5\" \"0\" \"9\"\n\n[[70]]\n [1] \"4\" \"9\" \"0\" \"0\" \"3\" \"4\" \"3\" \"0\" \"0\" \"0\"\n\n[[71]]\n [1] \"5\" \"0\" \"4\" \"1\" \"3\" \"5\" \"7\" \"9\" \"1\" \"1\"\n\n[[72]]\n [1] \"5\" \"1\" \"8\" \"4\" \"3\" \"7\" \"3\" \"2\" \"4\" \"8\"\n\n[[73]]\n [1] \"5\" \"3\" \"2\" \"9\" \"3\" \"8\" \"9\" \"0\" \"1\" \"7\"\n\n[[74]]\n [1] \"5\" \"4\" \"7\" \"6\" \"4\" \"0\" \"5\" \"2\" \"2\" \"4\"\n\n[[75]]\n [1] \"5\" \"6\" \"2\" \"5\" \"4\" \"2\" \"1\" \"8\" \"7\" \"5\"\n\n[[76]]\n [1] \"5\" \"7\" \"7\" \"6\" \"4\" \"3\" \"8\" \"9\" \"7\" \"6\"\n\n[[77]]\n [1] \"5\" \"9\" \"2\" \"9\" \"4\" \"5\" \"6\" \"5\" \"3\" \"3\"\n\n[[78]]\n [1] \"6\" \"0\" \"8\" \"4\" \"4\" \"7\" \"4\" \"5\" \"5\" \"2\"\n\n[[79]]\n [1] \"6\" \"2\" \"4\" \"1\" \"4\" \"9\" \"3\" \"0\" \"3\" \"9\"\n\n[[80]]\n [1] \"6\" \"4\" \"0\" \"0\" \"5\" \"1\" \"2\" \"0\" \"0\" \"0\"\n\n[[81]]\n [1] \"6\" \"5\" \"6\" \"1\" \"5\" \"3\" \"1\" \"4\" \"4\" \"1\"\n\n[[82]]\n [1] \"6\" \"7\" \"2\" \"4\" \"5\" \"5\" \"1\" \"3\" \"6\" \"8\"\n\n[[83]]\n [1] \"6\" \"8\" \"8\" \"9\" \"5\" \"7\" \"1\" \"7\" \"8\" \"7\"\n\n[[84]]\n [1] \"7\" \"0\" \"5\" \"6\" \"5\" \"9\" \"2\" \"7\" \"0\" \"4\"\n\n[[85]]\n [1] \"7\" \"2\" \"2\" \"5\" \"6\" \"1\" \"4\" \"1\" \"2\" \"5\"\n\n[[86]]\n [1] \"7\" \"3\" \"9\" \"6\" \"6\" \"3\" \"6\" \"0\" \"5\" \"6\"\n\n[[87]]\n [1] \"7\" \"5\" \"6\" \"9\" \"6\" \"5\" \"8\" \"5\" \"0\" \"3\"\n\n[[88]]\n [1] \"7\" \"7\" \"4\" \"4\" \"6\" \"8\" \"1\" \"4\" \"7\" \"2\"\n\n[[89]]\n [1] \"7\" \"9\" \"2\" \"1\" \"7\" \"0\" \"4\" \"9\" \"6\" \"9\"\n\n[[90]]\n [1] \"8\" \"1\" \"0\" \"0\" \"7\" \"2\" \"9\" \"0\" \"0\" \"0\"\n\n[[91]]\n [1] \"8\" \"2\" \"8\" \"1\" \"7\" \"5\" \"3\" \"5\" \"7\" \"1\"\n\n[[92]]\n [1] \"8\" \"4\" \"6\" \"4\" \"7\" \"7\" \"8\" \"6\" \"8\" \"8\"\n\n[[93]]\n [1] \"8\" \"6\" \"4\" \"9\" \"8\" \"0\" \"4\" \"3\" \"5\" \"7\"\n\n[[94]]\n [1] \"8\" \"8\" \"3\" \"6\" \"8\" \"3\" \"0\" \"5\" \"8\" \"4\"\n\n[[95]]\n [1] \"9\" \"0\" \"2\" \"5\" \"8\" \"5\" \"7\" \"3\" \"7\" \"5\"\n\n[[96]]\n [1] \"9\" \"2\" \"1\" \"6\" \"8\" \"8\" \"4\" \"7\" \"3\" \"6\"\n\n[[97]]\n [1] \"9\" \"4\" \"0\" \"9\" \"9\" \"1\" \"2\" \"6\" \"7\" \"3\"\n\n[[98]]\n [1] \"9\" \"6\" \"0\" \"4\" \"9\" \"4\" \"1\" \"1\" \"9\" \"2\"\n\n[[99]]\n [1] \"9\" \"8\" \"0\" \"1\" \"9\" \"7\" \"0\" \"2\" \"9\" \"9\"\n\n[[100]]\n [1] \"1\" \"0\" \"0\" \"0\" \"0\" \"1\" \"e\" \"+\" \"0\" \"6\"\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n3. map_chr(.f = function(x) {\n    str_sort(x, numeric = TRUE) %>% str_flatten()\n})\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```{style=\"max-height: 350px;\"}\n  [1] \"11\"         \"48\"         \"279\"        \"1466\"       \"12255\"      \"12366\"      \"33449\"     \n  [8] \"12456\"      \"12789\"      \"0000011\"    \"1111233\"    \"1124478\"    \"1126799\"    \"1244679\"   \n [15] \"2233557\"    \"0245669\"    \"1234899\"    \"2233458\"    \"1356689\"    \"0000048\"    \"1124469\"   \n [22] \"01444688\"   \"11225679\"   \"12345678\"   \"12255566\"   \"15666777\"   \"12367899\"   \"12245789\"  \n [29] \"12344889\"   \"00000279\"   \"11267999\"   \"012234678\"  \"013357899\"  \"011334569\"  \"122245578\" \n [36] \"124566669\"  \"013355669\"  \"124444578\"  \"111235599\"  \"000001466\"  \"111266889\"  \"014467788\" \n [43] \"014577899\"  \"113456889\"  \"011222559\"  \"112336679\"  \"0012223389\" \"0011223459\" \"0111244679\"\n [50] \"0000012255\" \"0111223566\" \"0001244678\" \"0124778889\" \"1124456679\" \"0123355667\" \"1113356667\"\n [57] \"1123345899\" \"1112334569\" \"0123345789\" \"0000012366\" \"1122236789\" \"2233344888\" \"0023456799\"\n [64] \"0122444669\" \"2222445567\" \"2344566789\" \"0033446789\" \"1223344446\" \"0123456789\" \"0000033449\"\n [71] \"0111345579\" \"1233445788\" \"0123357899\" \"0224445567\" \"1224555678\" \"3456677789\" \"2334555699\"\n [78] \"0244455678\" \"0123344699\" \"0000012456\" \"1113445566\" \"1234556678\" \"1567778889\" \"0024556779\"\n [85] \"1122245567\" \"0335666679\" \"0355566789\" \"1244467778\" \"0124677999\" \"0000012789\" \"1123557788\"\n [92] \"4466778888\" \"0344567889\" \"0334568888\" \"0235557789\" \"1234667889\" \"0123467999\" \"0112446999\"\n [99] \"0012789999\" \"+00000116e\"\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n4. str_which(pattern = \"0123456789\")\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```{style=\"max-height: 350px;\"}\n[1] 69\n```\n\n\n:::\n:::\n\n\n:::\n\n### using built-in functions\n組み込み関数だけでやろうとするとこんな感じ？\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nvec_num_sqcu |>\n  grep(\n    \"^\\\\d{10}$\", # <1>\n    x = _,\n    value = TRUE\n  ) |>\n  strsplit(split = \"\") |>\n  sapply(\n    FUN = \\(x) {\n      sort(x) |>\n        paste(collapse = \"\")\n    }\n  ) |>\n  grep(\n    \"0123456789\",\n    x = _,\n    value = TRUE\n  )\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n          69 \n\"0123456789\" \n```\n\n\n:::\n:::\n\n1. 正規表現で文頭と数字10文字と文末にしておくことで、科学的表記になる要素と数字10桁にならない要素を除外できますが……よくよく考えたら最後に`grep()`で探すので、ここの`grep()`は別になくてもいいかも。\n\n::: {.callout-note collapse=true}\n\n#### 処理の過程が見たい人向け\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"true\"}\nvec_num_sqcu %>%\n  grep(\n    \"^\\\\d{10}$\",\n    x = .,\n    value = TRUE\n  ) %>%\n  strsplit(split = \"\") %>%\n  sapply(\n    FUN = \\(x) {\n      sort(x) |>\n        paste(collapse = \"\")\n    }\n  ) %>%\n  grep(\n    \"0123456789\",\n    x = .,\n    value = TRUE\n  ) %>%\n  ViewPipeSteps::print_pipe_steps() -> results # for displaying pipeline processing\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n1. vec_num_sqcu\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```{style=\"max-height: 350px;\"}\n           1            2            3            4            5            6            7 \n        \"11\"         \"48\"        \"927\"       \"1664\"      \"25125\"      \"36216\"      \"49343\" \n           8            9           10           11           12           13           14 \n     \"64512\"      \"81729\"    \"1001000\"    \"1211331\"    \"1441728\"    \"1692197\"    \"1962744\" \n          15           16           17           18           19           20           21 \n   \"2253375\"    \"2564096\"    \"2894913\"    \"3245832\"    \"3616859\"    \"4008000\"    \"4419261\" \n          22           23           24           25           26           27           28 \n  \"48410648\"   \"52912167\"   \"57613824\"   \"62515625\"   \"67617576\"   \"72919683\"   \"78421952\" \n          29           30           31           32           33           34           35 \n  \"84124389\"   \"90027000\"   \"96129791\"  \"102432768\"  \"108935937\"  \"115639304\"  \"122542875\" \n          36           37           38           39           40           41           42 \n \"129646656\"  \"136950653\"  \"144454872\"  \"152159319\"  \"160064000\"  \"168168921\"  \"176474088\" \n          43           44           45           46           47           48           49 \n \"184979507\"  \"193685184\"  \"202591125\"  \"211697336\" \"2209103823\" \"2304110592\" \"2401117649\" \n          50           51           52           53           54           55           56 \n\"2500125000\" \"2601132651\" \"2704140608\" \"2809148877\" \"2916157464\" \"3025166375\" \"3136175616\" \n          57           58           59           60           61           62           63 \n\"3249185193\" \"3364195112\" \"3481205379\" \"3600216000\" \"3721226981\" \"3844238328\" \"3969250047\" \n          64           65           66           67           68           69           70 \n\"4096262144\" \"4225274625\" \"4356287496\" \"4489300763\" \"4624314432\" \"4761328509\" \"4900343000\" \n          71           72           73           74           75           76           77 \n\"5041357911\" \"5184373248\" \"5329389017\" \"5476405224\" \"5625421875\" \"5776438976\" \"5929456533\" \n          78           79           80           81           82           83           84 \n\"6084474552\" \"6241493039\" \"6400512000\" \"6561531441\" \"6724551368\" \"6889571787\" \"7056592704\" \n          85           86           87           88           89           90           91 \n\"7225614125\" \"7396636056\" \"7569658503\" \"7744681472\" \"7921704969\" \"8100729000\" \"8281753571\" \n          92           93           94           95           96           97           98 \n\"8464778688\" \"8649804357\" \"8836830584\" \"9025857375\" \"9216884736\" \"9409912673\" \"9604941192\" \n          99          100 \n\"9801970299\" \"100001e+06\" \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n2. grep(\"^\\\\d{10}$\", x = ., value = TRUE)\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```{style=\"max-height: 350px;\"}\n          47           48           49           50           51           52           53 \n\"2209103823\" \"2304110592\" \"2401117649\" \"2500125000\" \"2601132651\" \"2704140608\" \"2809148877\" \n          54           55           56           57           58           59           60 \n\"2916157464\" \"3025166375\" \"3136175616\" \"3249185193\" \"3364195112\" \"3481205379\" \"3600216000\" \n          61           62           63           64           65           66           67 \n\"3721226981\" \"3844238328\" \"3969250047\" \"4096262144\" \"4225274625\" \"4356287496\" \"4489300763\" \n          68           69           70           71           72           73           74 \n\"4624314432\" \"4761328509\" \"4900343000\" \"5041357911\" \"5184373248\" \"5329389017\" \"5476405224\" \n          75           76           77           78           79           80           81 \n\"5625421875\" \"5776438976\" \"5929456533\" \"6084474552\" \"6241493039\" \"6400512000\" \"6561531441\" \n          82           83           84           85           86           87           88 \n\"6724551368\" \"6889571787\" \"7056592704\" \"7225614125\" \"7396636056\" \"7569658503\" \"7744681472\" \n          89           90           91           92           93           94           95 \n\"7921704969\" \"8100729000\" \"8281753571\" \"8464778688\" \"8649804357\" \"8836830584\" \"9025857375\" \n          96           97           98           99 \n\"9216884736\" \"9409912673\" \"9604941192\" \"9801970299\" \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n3. strsplit(split = \"\")\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```{style=\"max-height: 350px;\"}\n$`47`\n [1] \"2\" \"2\" \"0\" \"9\" \"1\" \"0\" \"3\" \"8\" \"2\" \"3\"\n\n$`48`\n [1] \"2\" \"3\" \"0\" \"4\" \"1\" \"1\" \"0\" \"5\" \"9\" \"2\"\n\n$`49`\n [1] \"2\" \"4\" \"0\" \"1\" \"1\" \"1\" \"7\" \"6\" \"4\" \"9\"\n\n$`50`\n [1] \"2\" \"5\" \"0\" \"0\" \"1\" \"2\" \"5\" \"0\" \"0\" \"0\"\n\n$`51`\n [1] \"2\" \"6\" \"0\" \"1\" \"1\" \"3\" \"2\" \"6\" \"5\" \"1\"\n\n$`52`\n [1] \"2\" \"7\" \"0\" \"4\" \"1\" \"4\" \"0\" \"6\" \"0\" \"8\"\n\n$`53`\n [1] \"2\" \"8\" \"0\" \"9\" \"1\" \"4\" \"8\" \"8\" \"7\" \"7\"\n\n$`54`\n [1] \"2\" \"9\" \"1\" \"6\" \"1\" \"5\" \"7\" \"4\" \"6\" \"4\"\n\n$`55`\n [1] \"3\" \"0\" \"2\" \"5\" \"1\" \"6\" \"6\" \"3\" \"7\" \"5\"\n\n$`56`\n [1] \"3\" \"1\" \"3\" \"6\" \"1\" \"7\" \"5\" \"6\" \"1\" \"6\"\n\n$`57`\n [1] \"3\" \"2\" \"4\" \"9\" \"1\" \"8\" \"5\" \"1\" \"9\" \"3\"\n\n$`58`\n [1] \"3\" \"3\" \"6\" \"4\" \"1\" \"9\" \"5\" \"1\" \"1\" \"2\"\n\n$`59`\n [1] \"3\" \"4\" \"8\" \"1\" \"2\" \"0\" \"5\" \"3\" \"7\" \"9\"\n\n$`60`\n [1] \"3\" \"6\" \"0\" \"0\" \"2\" \"1\" \"6\" \"0\" \"0\" \"0\"\n\n$`61`\n [1] \"3\" \"7\" \"2\" \"1\" \"2\" \"2\" \"6\" \"9\" \"8\" \"1\"\n\n$`62`\n [1] \"3\" \"8\" \"4\" \"4\" \"2\" \"3\" \"8\" \"3\" \"2\" \"8\"\n\n$`63`\n [1] \"3\" \"9\" \"6\" \"9\" \"2\" \"5\" \"0\" \"0\" \"4\" \"7\"\n\n$`64`\n [1] \"4\" \"0\" \"9\" \"6\" \"2\" \"6\" \"2\" \"1\" \"4\" \"4\"\n\n$`65`\n [1] \"4\" \"2\" \"2\" \"5\" \"2\" \"7\" \"4\" \"6\" \"2\" \"5\"\n\n$`66`\n [1] \"4\" \"3\" \"5\" \"6\" \"2\" \"8\" \"7\" \"4\" \"9\" \"6\"\n\n$`67`\n [1] \"4\" \"4\" \"8\" \"9\" \"3\" \"0\" \"0\" \"7\" \"6\" \"3\"\n\n$`68`\n [1] \"4\" \"6\" \"2\" \"4\" \"3\" \"1\" \"4\" \"4\" \"3\" \"2\"\n\n$`69`\n [1] \"4\" \"7\" \"6\" \"1\" \"3\" \"2\" \"8\" \"5\" \"0\" \"9\"\n\n$`70`\n [1] \"4\" \"9\" \"0\" \"0\" \"3\" \"4\" \"3\" \"0\" \"0\" \"0\"\n\n$`71`\n [1] \"5\" \"0\" \"4\" \"1\" \"3\" \"5\" \"7\" \"9\" \"1\" \"1\"\n\n$`72`\n [1] \"5\" \"1\" \"8\" \"4\" \"3\" \"7\" \"3\" \"2\" \"4\" \"8\"\n\n$`73`\n [1] \"5\" \"3\" \"2\" \"9\" \"3\" \"8\" \"9\" \"0\" \"1\" \"7\"\n\n$`74`\n [1] \"5\" \"4\" \"7\" \"6\" \"4\" \"0\" \"5\" \"2\" \"2\" \"4\"\n\n$`75`\n [1] \"5\" \"6\" \"2\" \"5\" \"4\" \"2\" \"1\" \"8\" \"7\" \"5\"\n\n$`76`\n [1] \"5\" \"7\" \"7\" \"6\" \"4\" \"3\" \"8\" \"9\" \"7\" \"6\"\n\n$`77`\n [1] \"5\" \"9\" \"2\" \"9\" \"4\" \"5\" \"6\" \"5\" \"3\" \"3\"\n\n$`78`\n [1] \"6\" \"0\" \"8\" \"4\" \"4\" \"7\" \"4\" \"5\" \"5\" \"2\"\n\n$`79`\n [1] \"6\" \"2\" \"4\" \"1\" \"4\" \"9\" \"3\" \"0\" \"3\" \"9\"\n\n$`80`\n [1] \"6\" \"4\" \"0\" \"0\" \"5\" \"1\" \"2\" \"0\" \"0\" \"0\"\n\n$`81`\n [1] \"6\" \"5\" \"6\" \"1\" \"5\" \"3\" \"1\" \"4\" \"4\" \"1\"\n\n$`82`\n [1] \"6\" \"7\" \"2\" \"4\" \"5\" \"5\" \"1\" \"3\" \"6\" \"8\"\n\n$`83`\n [1] \"6\" \"8\" \"8\" \"9\" \"5\" \"7\" \"1\" \"7\" \"8\" \"7\"\n\n$`84`\n [1] \"7\" \"0\" \"5\" \"6\" \"5\" \"9\" \"2\" \"7\" \"0\" \"4\"\n\n$`85`\n [1] \"7\" \"2\" \"2\" \"5\" \"6\" \"1\" \"4\" \"1\" \"2\" \"5\"\n\n$`86`\n [1] \"7\" \"3\" \"9\" \"6\" \"6\" \"3\" \"6\" \"0\" \"5\" \"6\"\n\n$`87`\n [1] \"7\" \"5\" \"6\" \"9\" \"6\" \"5\" \"8\" \"5\" \"0\" \"3\"\n\n$`88`\n [1] \"7\" \"7\" \"4\" \"4\" \"6\" \"8\" \"1\" \"4\" \"7\" \"2\"\n\n$`89`\n [1] \"7\" \"9\" \"2\" \"1\" \"7\" \"0\" \"4\" \"9\" \"6\" \"9\"\n\n$`90`\n [1] \"8\" \"1\" \"0\" \"0\" \"7\" \"2\" \"9\" \"0\" \"0\" \"0\"\n\n$`91`\n [1] \"8\" \"2\" \"8\" \"1\" \"7\" \"5\" \"3\" \"5\" \"7\" \"1\"\n\n$`92`\n [1] \"8\" \"4\" \"6\" \"4\" \"7\" \"7\" \"8\" \"6\" \"8\" \"8\"\n\n$`93`\n [1] \"8\" \"6\" \"4\" \"9\" \"8\" \"0\" \"4\" \"3\" \"5\" \"7\"\n\n$`94`\n [1] \"8\" \"8\" \"3\" \"6\" \"8\" \"3\" \"0\" \"5\" \"8\" \"4\"\n\n$`95`\n [1] \"9\" \"0\" \"2\" \"5\" \"8\" \"5\" \"7\" \"3\" \"7\" \"5\"\n\n$`96`\n [1] \"9\" \"2\" \"1\" \"6\" \"8\" \"8\" \"4\" \"7\" \"3\" \"6\"\n\n$`97`\n [1] \"9\" \"4\" \"0\" \"9\" \"9\" \"1\" \"2\" \"6\" \"7\" \"3\"\n\n$`98`\n [1] \"9\" \"6\" \"0\" \"4\" \"9\" \"4\" \"1\" \"1\" \"9\" \"2\"\n\n$`99`\n [1] \"9\" \"8\" \"0\" \"1\" \"9\" \"7\" \"0\" \"2\" \"9\" \"9\"\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n4. sapply(FUN = function(x) {\n    paste(sort(x), collapse = \"\")\n})\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```{style=\"max-height: 350px;\"}\n          47           48           49           50           51           52           53 \n\"0012223389\" \"0011223459\" \"0111244679\" \"0000012255\" \"0111223566\" \"0001244678\" \"0124778889\" \n          54           55           56           57           58           59           60 \n\"1124456679\" \"0123355667\" \"1113356667\" \"1123345899\" \"1112334569\" \"0123345789\" \"0000012366\" \n          61           62           63           64           65           66           67 \n\"1122236789\" \"2233344888\" \"0023456799\" \"0122444669\" \"2222445567\" \"2344566789\" \"0033446789\" \n          68           69           70           71           72           73           74 \n\"1223344446\" \"0123456789\" \"0000033449\" \"0111345579\" \"1233445788\" \"0123357899\" \"0224445567\" \n          75           76           77           78           79           80           81 \n\"1224555678\" \"3456677789\" \"2334555699\" \"0244455678\" \"0123344699\" \"0000012456\" \"1113445566\" \n          82           83           84           85           86           87           88 \n\"1234556678\" \"1567778889\" \"0024556779\" \"1122245567\" \"0335666679\" \"0355566789\" \"1244467778\" \n          89           90           91           92           93           94           95 \n\"0124677999\" \"0000012789\" \"1123557788\" \"4466778888\" \"0344567889\" \"0334568888\" \"0235557789\" \n          96           97           98           99 \n\"1234667889\" \"0123467999\" \"0112446999\" \"0012789999\" \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n5. grep(\"0123456789\", x = ., value = TRUE)\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```{style=\"max-height: 350px;\"}\n          69 \n\"0123456789\" \n```\n\n\n:::\n:::\n\n\n:::\n\n`grep()`は第二引数`x`にマッチさせたい文字列が来るので、パイプフローの中だと必ずプレスホルダーが必要になる点と、`value = TRUE`にしてくれないとインデックスしか返してくれない点がやはり面倒です。\n\n## Supplement\n### scientific notation\nちなみに、`100^3`みたいな大きな数は指数表記（科学的表記）になります。\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nstr_c(c(100^2, 100^3, 100^4, 100^5))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"10000\" \"1e+06\" \"1e+08\" \"1e+10\"\n```\n\n\n:::\n:::\n\n\nこのまま桁数を取ろうとして`str_length()`を使うとこうなります。\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nstr_length(c(100^2, 100^3, 100^4, 100^5))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 5 5 5 5\n```\n\n\n:::\n:::\n\n\nなんと全部5になってしまいました。なので、最初のtibbleから始めた方法では実はこうなっていました。\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ntibble(\n  number = 100,\n  squared = number^2,\n  cubed = number^3\n) |>\n  filter(\n    str_length(squared) + str_length(cubed) == 10\n  )\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 3\n  number squared   cubed\n   <dbl>   <dbl>   <dbl>\n1    100   10000 1000000\n```\n\n\n:::\n:::\n\n本当だと11桁になるはずなので`dplyr::filter()`には引っかからないはずですが、なぜか残っています。tibbleはデフォルトだと13桁まで表示してくれるようなので[^tibble_width13]、コンソールの見た目上ではうまくいきそうですが、処理のうえではそうはならないようです。\n\n[^tibble_width13]: tibbleの表示に関する設定を行う`pillar`パッケージの`pillar.max_dec_width`に書いてある。 <https://pillar.r-lib.org/reference/pillar_options.html>\n\n対処法ですが、いくつか方法があります。例えば、あらかじめ`options(scipen = 大きな数)`をやっておくと、そのセッション内ではある程度は指数表記にならないようです。\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\noptions(scipen = 100)\nstr_c(c(100^2, 100^3, 100^4, 100^5))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"10000\"       \"1000000\"     \"100000000\"   \"10000000000\"\n```\n\n\n:::\n\n```{.r .cell-code}\nstr_length(c(100^2, 100^3, 100^4, 100^5))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1]  5  7  9 11\n```\n\n\n:::\n:::\n\n\nもしくは`format(..., scientific = FALSE)`を使うのもありかもしれません。特別なパッケージを使わずとも、ある程度の大きさの数まではちゃんと表示してくれます。なお、戻り値は文字列です。\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\noptions(scipen = 0) # restore defalut setting\n\nformat(\n  c(100^2, 100^3, 100^4, 100^5),\n  trim = TRUE, # <1>\n  scientific = FALSE\n)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"10000\"       \"1000000\"     \"100000000\"   \"10000000000\"\n```\n\n\n:::\n:::\n\n1. デフォルトの`trim = FALSE`のままだと、一番文字数が大きいものに合わせて、足りない部分がスペースで詰められちゃうので、桁数を数えるときは`TRUE`の方がいいです。\n\n### regular expression\n文字列をスプリットせずに正規表現を多用してどうにかならないかも試してみました。69以外の数字は0から9までの数字で重複があるということなので、はじめは後方参照をそのまま使えばいいのかなと思ってました。\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nvec_num_sqcu |>\n  grep(\n    pattern = \"^\\\\d{10}$\",\n    x = _,\n    value = TRUE\n  ) |>\n  grep(\n    pattern = \"(\\\\d).*?\\\\1\", # <1>\n    x = _,\n    value = TRUE,\n    invert = TRUE # <2>\n  )\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n          49           52           53           54           60           61           63 \n\"2401117649\" \"2704140608\" \"2809148877\" \"2916157464\" \"3600216000\" \"3721226981\" \"3969250047\" \n          69           72           73           76           78           79           80 \n\"4761328509\" \"5184373248\" \"5329389017\" \"5776438976\" \"6084474552\" \"6241493039\" \"6400512000\" \n          83           85           86           87           90           95           96 \n\"6889571787\" \"7225614125\" \"7396636056\" \"7569658503\" \"8100729000\" \"9025857375\" \"9216884736\" \n```\n\n\n:::\n:::\n\n1. 意図としては、`(\\\\d)`で数字を１文字拾って、`.*?`で違う数字があってもなくても良くて、`\\\\1`の後方参照で最初に拾った数値の重複が表れる、という感じでした。\n2. 引数`invert`が`TRUE`で、マッチしなかった要素を返すようにする。\n\n69以外は数字に重複がでるのでこれでできるかと思ったら、思いのほか絞れませんでした。残った数を見てみると、どうやら最初の一桁（左端の数字）が重複していないものが残っているっぽいです。`grep()`のHelpから飛んで`help(\"regular expression\")`に飛んで、さらにPOSIX 1003.2 standard[^posix_1003.2]に飛んで読んでみた結果、最初`(\\\\d)`が左端の数字にマッチするけど、マッチした文字が後方で見つからないので全体としてマッチせず、ということなんじゃないかと思います。\n\n[^posix_1003.2]: <https://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap09.html>\n\nなお、引数`perl`を`TRUE`にして、Perl言語の正規表現の扱いにすると成功しました。\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nvec_num_sqcu |>\n  grep(\n    pattern = \"^\\\\d{10}$\",\n    x = _,\n    value = TRUE\n  ) |>\n  grep(\n    pattern = \"(\\\\d).*?\\\\1\",\n    x = _,\n    perl = TRUE, # Here！\n    value = TRUE,\n    invert = TRUE\n  )\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n          69 \n\"4761328509\" \n```\n\n\n:::\n:::\n\n\n他にも、重複がある数字にマッチしてほしいということで、最初に任意の文字（`.*?`）を追加したら、デフォルトの`grep()`のままでもうまく行きました。\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nvec_num_sqcu |>\n  grep(\n    pattern = \"^\\\\d{10}$\",\n    x = _,\n    value = TRUE\n  ) |>\n  grep(\n    pattern = \".*?(\\\\d).*?\\\\1\",\n    x = _,\n    value = TRUE,\n    invert = TRUE\n  )\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n          69 \n\"4761328509\" \n```\n\n\n:::\n:::\n\n\nちなみに`stringr`だと`grep(..., perl = TRUE)`のときと同じ結果になります。\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nvec_num_sqcu |>\n  str_view( # <1>\n    pattern = \"(\\\\d).*?\\\\1\",\n    match = NA, # <2>\n    html = FALSE # <3>\n  ) |>\n  print(n = 100)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```{style=\"max-height: 350px;\"}\n  [1] │ <11>\n  [2] │ 48\n  [3] │ 927\n  [4] │ 1<66>4\n  [5] │ <2512>5\n  [6] │ 3<6216>\n  [7] │ <4934>3\n  [8] │ 64512\n  [9] │ 81729\n [10] │ <1001><00>0\n [11] │ <121><1331>\n [12] │ <1441>728\n [13] │ <16921>97\n [14] │ 19627<44>\n [15] │ <22><53375>\n [16] │ 25<64096>\n [17] │ 28<949>13\n [18] │ <324583>2\n [19] │ 3<616>859\n [20] │ 4<00>8<00>0\n [21] │ <44><19261>\n [22] │ <484>10648\n [23] │ 5<2912>167\n [24] │ 57613824\n [25] │ <625156>25\n [26] │ <676>1<757>6\n [27] │ 72<919>683\n [28] │ 784<21952>\n [29] │ <8412438>9\n [30] │ 9<00>27<00>0\n [31] │ <96129>791\n [32] │ 10<2432>768\n [33] │ 108<9359>37\n [34] │ <11>56<393>04\n [35] │ 1<22><542875>\n [36] │ 129<646><656>\n [37] │ 1<36950653>\n [38] │ 1<44><454>872\n [39] │ <1521>5<9319>\n [40] │ 1<6006>4<00>0\n [41] │ <1681>68921\n [42] │ 1<7647>40<88>\n [43] │ 184<979>507\n [44] │ <1936851>84\n [45] │ <202><591125>\n [46] │ 2<11><697336>\n [47] │ <22><0910><3823>\n [48] │ <2304110592>\n [49] │ 2<40111764>9\n [50] │ <250012>5<00>0\n [51] │ <2601132>651\n [52] │ 27<04140>608\n [53] │ 2<809148>8<77>\n [54] │ 29<161>57<464>\n [55] │ <30251663>75\n [56] │ <313><61756>16\n [57] │ <3249185193>\n [58] │ <33>64<1951>12\n [59] │ <34812053>79\n [60] │ 3<600216><00>0\n [61] │ 37<212>26981\n [62] │ <384423><8328>\n [63] │ 3<969>25<00>47\n [64] │ <409626214>4\n [65] │ <4225274>625\n [66] │ <43562874>96\n [67] │ <44>89<300763>\n [68] │ <4624><31443>2\n [69] │ 4761328509\n [70] │ <490034>3<00>0\n [71] │ <504135>79<11>\n [72] │ 51<84373248>\n [73] │ 5<3293>89017\n [74] │ <5476405><22>4\n [75] │ <5625>421875\n [76] │ 5<77><6438976>\n [77] │ <592945>65<33>\n [78] │ 608<44>74<55>2\n [79] │ 62<414><93039>\n [80] │ 64<00>512<00>0\n [81] │ <656><1531><44>1\n [82] │ <672455136>8\n [83] │ 6<88>95<717>87\n [84] │ <70565927>04\n [85] │ 7<22><5614125>\n [86] │ 7<39663><6056>\n [87] │ 7<56965>8503\n [88] │ <77><44>681472\n [89] │ <79217>04<969>\n [90] │ 81<00>729<00>0\n [91] │ <828><1753571>\n [92] │ <8464778>6<88>\n [93] │ <86498>04357\n [94] │ <88><3683>0584\n [95] │ 902<585><737>5\n [96] │ 921<6884736>\n [97] │ <9409>912673\n [98] │ <96049>4<11>92\n [99] │ <98019>702<99>\n[100] │ <100001>e+06\n```\n\n\n:::\n:::\n\n1. `stringr::str_view()`はマッチしたところを表示してくれます。コンソール上だとマッチした部分が<>で囲まれて青色で出力されます。\n2. マッチの有無にかかわらず、全部出力する。\n3. `TRUE`だとHTML出力になるけど、レンダリングした時にスクロールに対応してくれなかったので、デフォルトの`FALSE`に。\n\n10桁の中では69だけマッチしていないです。つまり、69が0から9の数字までで重複がないということですね。\n\n## Conclusion\n69という数字が、2乗した値と3乗した値に0から9までの数字が重複なく現れる唯一の数であるというのを、Rを使って確かめてみました。思ったより手間がかからずにできました。正規表現についてはまだまだ勉強しないとです。\n\n## Session Infomation\n\n:::{.callout-note collapse=true title=\"sessioninfo\"}\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output .cell-output-stdout}\n\n```\nR version 4.4.2 (2024-10-31 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nRunning under: Windows 11 x64 (build 26100)\n\nMatrix products: default\n\n\nlocale:\n[1] LC_COLLATE=Japanese_Japan.utf8  LC_CTYPE=Japanese_Japan.utf8    LC_MONETARY=Japanese_Japan.utf8\n[4] LC_NUMERIC=C                    LC_TIME=Japanese_Japan.utf8    \n\ntime zone: Asia/Tokyo\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] lubridate_1.9.4 forcats_1.0.0   stringr_1.5.1   dplyr_1.1.4     purrr_1.1.0     readr_2.1.5    \n [7] tidyr_1.3.1     tibble_3.3.0    ggplot2_3.5.2   tidyverse_2.0.0\n\nloaded via a namespace (and not attached):\n [1] gtable_0.3.6        jsonlite_2.0.0      compiler_4.4.2      tidyselect_1.2.1   \n [5] systemfonts_1.2.3   scales_1.4.0        textshaping_1.0.1   yaml_2.3.10        \n [9] fastmap_1.2.0       R6_2.6.1            labeling_0.4.3      generics_0.1.4     \n[13] knitr_1.50          htmlwidgets_1.6.4   pillar_1.11.0       RColorBrewer_1.1-3 \n[17] tzdb_0.5.0          rlang_1.1.6         stringi_1.8.7       xfun_0.52          \n[21] ViewPipeSteps_0.1.0 timechange_0.3.0    cli_3.6.5           withr_3.0.2        \n[25] magrittr_2.0.3      digest_0.6.37       grid_4.4.2          rstudioapi_0.17.1  \n[29] hms_1.1.3           lifecycle_1.0.4     vctrs_0.6.5         evaluate_1.0.5     \n[33] glue_1.8.0          farver_2.1.2        ragg_1.4.0          rmarkdown_2.29     \n[37] tools_4.4.2         pkgconfig_2.0.3     htmltools_0.5.8.1  \n```\n\n\n:::\n:::\n\n\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}